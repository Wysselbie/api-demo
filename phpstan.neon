parameters:
    level: 8
    paths:
        - src
        - tests
    
    # Symfony-specific configuration
    symfony:
        # Container XML path - will be generated during cache warmup
        # Falls back gracefully if not found (e.g., during CI)
        containerXmlPath: '%currentWorkingDirectory%/var/cache/test/App_KernelTestDebugContainer.xml'
        consoleApplicationLoader: '%currentWorkingDirectory%/tests/console-application.php'
    
    # Ignore patterns
    ignoreErrors:
        # Ignore specific Doctrine-related issues that are common in Symfony
        - '#Call to an undefined method App\\Entity\\[a-zA-Z0-9_]+::[a-zA-Z0-9_]+\(\)#'
        - '#Access to an undefined property App\\Entity\\[a-zA-Z0-9_]+::\$[a-zA-Z0-9_]+#'
    
    # Bootstrap file
    bootstrapFiles:
        - '%currentWorkingDirectory%/tests/bootstrap.php'
    
    # Cache directory
    tmpDir: 'var/cache/phpstan'
    
    # Additional rules (these are now enabled by default in PHPStan 1.x)
    # checkMissingIterableValueType and checkGenericClassInNonGenericObjectType are deprecated
    reportUnmatchedIgnoredErrors: false
    
includes:
    - vendor/phpstan/phpstan-symfony/extension.neon
